@using MS.Core.Language;
@using MS.Business;
@using MS.Web.Models.Others;
@using MvcContrib.UI.Grid;
@using MS.Web.Code.LIBS;

@model List<CampaignCategory>
@{
    ViewBag.Title = Resource_tr_TR.Category;
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
@section HeadContent {
    @Styles.Render("~/Areas/Admin/Content/css/uploadfile.css",
                    "~/Areas/Admin/Content/css/FileUpload.css",
    //"~/Areas/Admin/Content/css/FileUpload.css",
                "~/Areas/Admin/Content/bootstrap-switch.css",
             "~/Areas/Admin/Content/dataTables.bootstrap.css"
             )
}
<section class="content-header">
    <h1>@Resource_tr_TR.Category</h1>
</section>
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            @Html.Partial("_AdminNotification")
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">
                        <a data-toggle="modal" href="@Url.Action("addeditcategory")" data-target="#modal-create-edit-category" class="btn bg-orange">
                            @Resource_tr_TR.AddNew <i class="fa fa-plus"></i>
                        </a>
                    </h3>
                </div><!-- /.box-header -->
                <div class="box-body table-responsive">
                    @Html.Grid(Model).Columns(column =>
               {
                   column.For(a => (!string.IsNullOrEmpty(a.CategoryImage) ? (a.CategoryImage.Contains("technofaceapps.com/migrosiphone") ? "<img src='" + a.CategoryImage + "' height=80 />" : "<img src='" + @Url.Content(a.CategoryImage + "?height=80") + "' />") : "")).Named(@Resource_tr_TR.Image).Attributes(@class => "width10p").Encode(false);
                   column.For(a => a.CategoryName).Named(Resource_tr_TR.CategoryName).Attributes(@class => "width15p");
                   column.For(a => a.DisplayOrder).Named(Resource_tr_TR.DisplayOrder).Attributes(@class => "width10p");
                   // column.For(a => Html.CheckBox("VisibleOnMainPage", a.VisibleOnMainPage, new { @class = "editor-active", @readonly = "readonly" })).Named(Resource_tr_TR.VisibleOnMainPage).Attributes(@class => "width10p");
                   // column.For(a => (a.Campaigns.Count>0? "<a href=\"" + Url.Action("index", "campaign", new {id=a.CategoryID }) +"\">" + @Resource_tr_TR.GotoCampaings + "</a>":"")).Named(@Resource_tr_TR.Campaigns).Encode(false).Attributes(@class => "width15p");

                   //   column.For(a => Html.CheckBox("Status", a.Status, new { @value = a.CategoryID, @class = "switchBox switch-small simple" })).Named(Resource_tr_TR.ActivePassive).Attributes(@class => "width10p");
                   column.For(a => "<a class=\"btn btn-primary btn-sm\" href=\"" + Url.Action("addeditcategory", new { id = a.CategoryID }) + "\" data-target=\"#modal-create-edit-category\" data-toggle=\"modal\">" + Resource_tr_TR.Edit + "<i class=\"fa fa-edit\"></i></a>" +
                                   " <a class=\"btn btn-danger btn-sm\" href=\"" + Url.Action("delete", new { id = a.CategoryID }) + "\" data-target=\"#modal-delete-category\" data-toggle=\"modal\">" + Resource_tr_TR.Delete + " <i class=\"fa fa-trash-o\"></i></a>").Attributes(@class => "width15p")
                                   .Named(Resource_tr_TR.Operations).Encode(false);
               }).Attributes(@id => "grid-category", @class => "table table-bordered table-hover")
                </div>
            </div>
        </div>
    </div>

    @Html.Partial("_Modal", new Modal { ID = "modal-create-edit-category", AreaLabeledID = "modal-create-edit-category-label", Size = ModalSize.Medium })
    @Html.Partial("_Modal", new Modal { ID = "modal-delete-category", AreaLabeledID = "modal-delete-category-label" })
    @Html.Partial("_Modal", new Modal { ID = "modal-add-photos", AreaLabeledID = "modal-add-photos-label", Size = ModalSize.Medium })
    @Html.Partial("_Modal", new Modal { ID = "modal-addbag-photos", AreaLabeledID = "modal-addbag-photos-label", Size = ModalSize.Medium })
    @Html.Partial("_Modal", new Modal { ID = "modal-new-add-photos", AreaLabeledID = "modal-new-add-photos-label", Size = ModalSize.Medium })
    @Html.Partial("_Modal", new Modal { ID = "modal-new-addbag-photos", AreaLabeledID = "modal-new-addbag-photos-label", Size = ModalSize.Medium })
</section>


@section ScriptContent{
@Scripts.Render(
"~/Areas/Admin/Script/jquery.dataTables.js",
       "~/Areas/Admin/Script/dataTables.bootstrap.js",
          "~/Areas/Admin/Script/global.js",
          "~/Scripts/jquery.uploadfile.js",
          "~/Areas/Admin/Script/bootstrap-switch.js",
        "~/Areas/Admin/Script/views/category-index.js",
        "~/Areas/Admin/Script/views/category-image-upload.js")

    <script type="text/javascript">
        $('#grid-category').DataTable({
            stateSave: true,
            bDestroy: true,
            "aoColumnDefs": [{ 'bSortable': false, 'aTargets': [0, 3] }]
        });
        
    </script>

}


